"use strict";(globalThis.webpackChunkgh_docs=globalThis.webpackChunkgh_docs||[]).push([[871],{3517(e,n,a){a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"architecture/database","title":"Arquitetura de Banco de Dados","description":"O FinTrack utiliza PostgreSQL como banco de dados relacional. O schema \xe9 normalizado e faz uso intensivo de chaves estrangeiras para garantir integridade referencial.","source":"@site/docs/architecture/database.md","sourceDirName":"architecture","slug":"/architecture/database","permalink":"/phrs-fintrack-docs/en/docs/architecture/database","draft":false,"unlisted":false,"editUrl":"https://github.com/PHRaulino-Space/fintrack-docs/tree/main/gh-docs/docs/architecture/database.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Arquitetura Backend","permalink":"/phrs-fintrack-docs/en/docs/architecture/backend"},"next":{"title":"Servi\xe7o de IA (Categoriza\xe7\xe3o)","permalink":"/phrs-fintrack-docs/en/docs/architecture/ai-service"}}');var s=a(4848),r=a(8453);const o={},c="Arquitetura de Banco de Dados",t={},d=[{value:"Diagrama ER (Entidade-Relacionamento)",id:"diagrama-er-entidade-relacionamento",level:2},{value:"Tabelas Principais",id:"tabelas-principais",level:2},{value:"N\xfacleo Financeiro",id:"n\xfacleo-financeiro",level:3},{value:"Categoriza\xe7\xe3o",id:"categoriza\xe7\xe3o",level:3},{value:"Importa\xe7\xe3o e IA",id:"importa\xe7\xe3o-e-ia",level:3},{value:"Tipos Enum",id:"tipos-enum",level:2}];function l(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"arquitetura-de-banco-de-dados",children:"Arquitetura de Banco de Dados"})}),"\n",(0,s.jsxs)(n.p,{children:["O FinTrack utiliza ",(0,s.jsx)(n.strong,{children:"PostgreSQL"})," como banco de dados relacional. O schema \xe9 normalizado e faz uso intensivo de chaves estrangeiras para garantir integridade referencial."]}),"\n",(0,s.jsx)(n.h2,{id:"diagrama-er-entidade-relacionamento",children:"Diagrama ER (Entidade-Relacionamento)"}),"\n",(0,s.jsx)(n.mermaid,{value:'erDiagram\n    Users ||--o{ Workspaces : "member of"\n    Workspaces ||--o{ Accounts : has\n    Workspaces ||--o{ Categories : defines\n    Accounts ||--o{ Transactions : contains\n    Categories ||--o{ Transactions : classifies\n    ImportSessions ||--o{ StagedTransactions : contains\n\n    Users {\n        uuid id PK\n        string email\n        string name\n    }\n\n    Workspaces {\n        uuid id PK\n        string name\n    }\n\n    Accounts {\n        uuid id PK\n        uuid workspace_id FK\n        string name\n        enum type "CHECKING, WALLET..."\n        decimal balance\n    }\n\n    Categories {\n        uuid id PK\n        uuid workspace_id FK\n        string name\n        enum type "INCOME, EXPENSE"\n    }\n\n    Transactions {\n        uuid id PK\n        uuid account_id FK\n        uuid category_id FK\n        decimal amount\n        date date\n        string description\n    }\n\n    ImportSessions {\n        uuid id PK\n        uuid user_id FK\n        string filename\n        string status\n    }'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["Nota: O diagrama acima \xe9 uma simplifica\xe7\xe3o das principais entidades. O schema real possui mais tabelas como ",(0,s.jsx)(n.code,{children:"cards"}),", ",(0,s.jsx)(n.code,{children:"tags"}),", ",(0,s.jsx)(n.code,{children:"recurring_transactions"}),", etc."]})}),"\n",(0,s.jsx)(n.h2,{id:"tabelas-principais",children:"Tabelas Principais"}),"\n",(0,s.jsx)(n.h3,{id:"n\xfacleo-financeiro",children:"N\xfacleo Financeiro"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"accounts"})}),": Contas banc\xe1rias, carteiras."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"cards"})}),": Cart\xf5es de cr\xe9dito (vinculados a uma conta para pagamento)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"incomes"})," / ",(0,s.jsx)(n.code,{children:"expenses"})," / ",(0,s.jsx)(n.code,{children:"transfers"})]}),": Tabelas separadas para cada tipo de transa\xe7\xe3o, permitindo campos espec\xedficos e melhor organiza\xe7\xe3o."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"categoriza\xe7\xe3o",children:"Categoriza\xe7\xe3o"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"categories"})}),": Categorias macro (ex: Alimenta\xe7\xe3o)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"sub_categories"})}),": Refinamento (ex: Restaurante, Mercado)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"tags"})}),": Marcadores transversais (ex: #ferias, #reembolsavel)."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"importa\xe7\xe3o-e-ia",children:"Importa\xe7\xe3o e IA"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"import_sessions"})}),": Representa um arquivo (CSV) sendo processado."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"staged_transactions"})}),": Transa\xe7\xf5es tempor\xe1rias aguardando aprova\xe7\xe3o."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"category_embeddings"})}),": Armazena vetores de texto para busca sem\xe2ntica e sugest\xf5es de categoriza\xe7\xe3o."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"tipos-enum",children:"Tipos Enum"}),"\n",(0,s.jsx)(n.p,{children:"O banco utiliza tipos ENUM do Postgres para garantir integridade de dom\xednios fixos:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"transaction_status"}),": VALIDATING, PAID, PENDING, IGNORE."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"account_type"}),": CHECKING, SAVINGS, INVESTMENT, etc."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,n,a){a.d(n,{R:()=>o,x:()=>c});var i=a(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);