"use strict";(globalThis.webpackChunkgh_docs=globalThis.webpackChunkgh_docs||[]).push([[461],{8453(e,n,o){o.d(n,{R:()=>a,x:()=>i});var t=o(6540);const r={},s=t.createContext(r);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},9937(e,n,o){o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"frontend-guide/integration-example","title":"integration-example","description":"","source":"@site/docs/frontend-guide/integration-example.md","sourceDirName":"frontend-guide","slug":"/frontend-guide/integration-example","permalink":"/phrs-fintrack-docs/en/docs/frontend-guide/integration-example","draft":false,"unlisted":false,"editUrl":"https://github.com/PHRaulino-Space/fintrack-docs/tree/main/gh-docs/docs/frontend-guide/integration-example.md","tags":[],"version":"current","frontMatter":{}}');var r=o(4848),s=o(8453);const a={},i=void 0,c={},d=[];function p(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import axios from "axios"\nimport { useAuth } from "@/hooks/use-auth" // Exemplo de hook real do projeto\n\n// Cria\xe7\xe3o da inst\xe2ncia Axios com baseURL do .env\nconst api = axios.create({\n  baseURL: `${process.env.NEXT_PUBLIC_API_BASE_URL}${process.env.NEXT_PUBLIC_API_PREFIX || ""}`,\n  withCredentials: true,\n  headers: {\n    "Content-Type": "application/json",\n  },\n})\n\n// Interceptor de Requisi\xe7\xe3o: Inje\xe7\xe3o do Workspace ID\n// Este padr\xe3o \xe9 crucial para o sistema multi-tenant funcionar\napi.interceptors.request.use(\n  (config) => {\n    // Acessa o estado global do Zustand fora de componentes React\n    const activeWorkspace = useAuth.getState().activeWorkspace\n\n    if (activeWorkspace) {\n      config.headers["X-Workspace-ID"] = activeWorkspace.id\n    }\n\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\n// Interceptor de Resposta: Tratamento de Erros Globais\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // Redirecionamento autom\xe1tico em caso de token expirado\n    if (error.response && error.response.status === 401) {\n       useAuth.getState().logout()\n       if (typeof window !== "undefined" && !window.location.pathname.includes("/login")) {\n         window.location.href = "/login"\n       }\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default api\n'})})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);