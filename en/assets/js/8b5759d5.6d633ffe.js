"use strict";(globalThis.webpackChunkgh_docs=globalThis.webpackChunkgh_docs||[]).push([[6226],{1981(e,s,n){n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"api-reference/import-sessions","title":"Import Sessions","description":"Gerencia o ciclo de vida da importa\xe7\xe3o de arquivos banc\xe1rios (CSV).","source":"@site/docs/api-reference/import-sessions.md","sourceDirName":"api-reference","slug":"/api-reference/import-sessions","permalink":"/fintrack-docs/en/docs/api-reference/import-sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/PHRaulino-Space/fintrack-docs/tree/main/gh-docs/docs/api-reference/import-sessions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Transactions","permalink":"/fintrack-docs/en/docs/api-reference/transactions"},"next":{"title":"Reports","permalink":"/fintrack-docs/en/docs/api-reference/reports"}}');var i=n(4848),r=n(8453);const t={},c="Import Sessions",a={},d=[{value:"Fluxo",id:"fluxo",level:2},{value:"<code>POST /import-sessions</code>",id:"post-import-sessions",level:2},{value:"<code>POST /import-sessions/{id}/upload</code>",id:"post-import-sessionsidupload",level:2},{value:"<code>GET /import-sessions/{id}/staged-transactions</code>",id:"get-import-sessionsidstaged-transactions",level:2},{value:"<code>POST /import-sessions/{id}/commit</code>",id:"post-import-sessionsidcommit",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"import-sessions",children:"Import Sessions"})}),"\n",(0,i.jsx)(s.p,{children:"Gerencia o ciclo de vida da importa\xe7\xe3o de arquivos banc\xe1rios (CSV)."}),"\n",(0,i.jsx)(s.h2,{id:"fluxo",children:"Fluxo"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /import-sessions"}),": Cria a sess\xe3o."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /.../upload"}),": Envia o arquivo."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /.../staged-transactions"}),": Revisa e corrige."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /.../commit"}),": Efetiva no banco."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"post-import-sessions",children:(0,i.jsx)(s.code,{children:"POST /import-sessions"})}),"\n",(0,i.jsx)(s.p,{children:'Cria uma "gaveta" para processar um arquivo.'}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "account_id": "uuid-conta",     // Para extratos de conta corrente\n  "card_id": "uuid-cartao",       // Para faturas de cart\xe3o\n  "billing_month": "2023-11",     // Obrigat\xf3rio se for cart\xe3o\n  "target_value": 0               // Opcional (valor de controle)\n}\n'})}),"\n",(0,i.jsx)(s.h2,{id:"post-import-sessionsidupload",children:(0,i.jsx)(s.code,{children:"POST /import-sessions/{id}/upload"})}),"\n",(0,i.jsx)(s.p,{children:"Faz o upload do arquivo CSV."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Content-Type"}),": ",(0,i.jsx)(s.code,{children:"multipart/form-data"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Field"}),": ",(0,i.jsx)(s.code,{children:"file"})," (binary)"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"get-import-sessionsidstaged-transactions",children:(0,i.jsx)(s.code,{children:"GET /import-sessions/{id}/staged-transactions"})}),"\n",(0,i.jsx)(s.p,{children:"Retorna as transa\xe7\xf5es lidas do arquivo, j\xe1 com sugest\xf5es de categoria da IA."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Response (Parcial):"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "id": "uuid-temp",\n    "transaction_date": "2023-11-05",\n    "amount": 50.00,\n    "description": "UBER *VIAGEM",\n    "type": "EXPENSE",\n    "status": "PENDING",\n    "data": {\n      "suggested_category_id": "uuid-transporte",\n      "confidence_score": 0.98\n    }\n  }\n]\n'})}),"\n",(0,i.jsx)(s.h2,{id:"post-import-sessionsidcommit",children:(0,i.jsx)(s.code,{children:"POST /import-sessions/{id}/commit"})}),"\n",(0,i.jsxs)(s.p,{children:["Finaliza a sess\xe3o. Transforma todas as ",(0,i.jsx)(s.code,{children:"StagedTransactions"})," com status ",(0,i.jsx)(s.code,{children:"READY"})," em ",(0,i.jsx)(s.code,{children:"Expense"}),"/",(0,i.jsx)(s.code,{children:"Income"})," reais."]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,s,n){n.d(s,{R:()=>t,x:()=>c});var o=n(6540);const i={},r=o.createContext(i);function t(e){const s=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);