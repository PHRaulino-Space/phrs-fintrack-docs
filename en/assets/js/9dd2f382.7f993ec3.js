"use strict";(globalThis.webpackChunkgh_docs=globalThis.webpackChunkgh_docs||[]).push([[349],{5105(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"architecture/backend","title":"Arquitetura Backend","description":"O backend do FinTrack \xe9 escrito em Go e segue estritamente a Clean Architecture. Isso garante que a l\xf3gica de neg\xf3cio seja independente de frameworks, banco de dados ou interfaces externas.","source":"@site/docs/architecture/backend.md","sourceDirName":"architecture","slug":"/architecture/backend","permalink":"/fintrack-docs/en/docs/architecture/backend","draft":false,"unlisted":false,"editUrl":"https://github.com/PHRaulino-Space/fintrack-docs/tree/main/gh-docs/docs/architecture/backend.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Arquitetura Frontend","permalink":"/fintrack-docs/en/docs/architecture/frontend"},"next":{"title":"Arquitetura de Banco de Dados","permalink":"/fintrack-docs/en/docs/architecture/database"}}');var t=r(4848),a=r(8453);const i={},c="Arquitetura Backend",d={},o=[{value:"Camadas da Aplica\xe7\xe3o",id:"camadas-da-aplica\xe7\xe3o",level:2},{value:"Estrutura de Diret\xf3rios (<code>/backend</code>)",id:"estrutura-de-diret\xf3rios-backend",level:2},{value:"Padr\xe3o de Reposit\xf3rio",id:"padr\xe3o-de-reposit\xf3rio",level:2},{value:"Middleware",id:"middleware",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"arquitetura-backend",children:"Arquitetura Backend"})}),"\n",(0,t.jsxs)(n.p,{children:["O backend do FinTrack \xe9 escrito em ",(0,t.jsx)(n.strong,{children:"Go"})," e segue estritamente a ",(0,t.jsx)(n.strong,{children:"Clean Architecture"}),". Isso garante que a l\xf3gica de neg\xf3cio seja independente de frameworks, banco de dados ou interfaces externas."]}),"\n",(0,t.jsx)(n.h2,{id:"camadas-da-aplica\xe7\xe3o",children:"Camadas da Aplica\xe7\xe3o"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TD\n    Drivers[Drivers / Frameworks Web] --\x3e Adapters[Interface Adapters / Controllers]\n    Adapters --\x3e UseCases[Use Cases / Application Business Rules]\n    UseCases --\x3e Entities[Entities / Enterprise Business Rules]\n\n    subgraph "External Interfaces"\n        Gin[Gin/HTTP Server]\n        Postgres[PostgreSQL DB]\n    end\n\n    subgraph "Interface Adapters"\n        HTTPHandler[HTTP Handlers]\n        RepoImpl[Repository Implementation]\n    end\n\n    subgraph "Application Logic"\n        UseCaseService[Service / UseCase]\n    end\n\n    subgraph "Domain"\n        EntityStructs[Domain Entities]\n    end\n\n    Gin --\x3e HTTPHandler\n    HTTPHandler --\x3e UseCaseService\n    UseCaseService --\x3e EntityStructs\n    UseCaseService --\x3e RepoInterface[Repository Interface]\n    RepoImpl -.-> RepoInterface\n    RepoImpl --\x3e Postgres'}),"\n",(0,t.jsxs)(n.h2,{id:"estrutura-de-diret\xf3rios-backend",children:["Estrutura de Diret\xf3rios (",(0,t.jsx)(n.code,{children:"/backend"}),")"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"cmd/app"})}),": Ponto de entrada (",(0,t.jsx)(n.code,{children:"main.go"}),"). Inicializa depend\xeancias e sobe o servidor."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"internal/entity"})}),": Define as estruturas de dados fundamentais (User, Account, Transaction). N\xe3o tem depend\xeancias externas."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"internal/usecase"})}),": Cont\xe9m a l\xf3gica de neg\xf3cio. Define interfaces para reposit\xf3rios.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ex: ",(0,t.jsx)(n.code,{children:"CreateTransaction"}),", ",(0,t.jsx)(n.code,{children:"ImportFile"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"internal/controller/http/v1"})}),": Camada de transporte. Recebe JSON, valida input, chama o UseCase e retorna JSON."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"internal/usecase/repo"})}),": Implementa\xe7\xe3o concreta dos reposit\xf3rios (PostgreSQL)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"pkg/"})}),": Bibliotecas compartilhadas e utilit\xe1rios (Logger, Postgres connection)."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"padr\xe3o-de-reposit\xf3rio",children:"Padr\xe3o de Reposit\xf3rio"}),"\n",(0,t.jsx)(n.p,{children:"O backend desacopla a l\xf3gica do banco de dados atrav\xe9s de interfaces."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Interface (UseCase):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"type AccountRepo interface {\n    Create(ctx context.Context, account *entity.Account) error\n    GetByID(ctx context.Context, id uuid.UUID) (*entity.Account, error)\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Implementa\xe7\xe3o (Infrastructure):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'func (r *AccountRepo) Create(ctx context.Context, a *entity.Account) error {\n    sql, args, _ := r.Builder.Insert("accounts")...\n    _, err := r.Pool.Exec(ctx, sql, args...)\n    return err\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"middleware",children:"Middleware"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Auth Middleware"}),": Valida tokens JWT e extrai o ",(0,t.jsx)(n.code,{children:"user_id"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Workspace Middleware"}),": Garante que o usu\xe1rio tem acesso ao workspace solicitado no header ",(0,t.jsx)(n.code,{children:"X-Workspace-ID"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>c});var s=r(6540);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);