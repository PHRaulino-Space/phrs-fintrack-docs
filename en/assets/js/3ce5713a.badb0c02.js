"use strict";(globalThis.webpackChunkgh_docs=globalThis.webpackChunkgh_docs||[]).push([[1419],{357(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"api-reference/recurring-transactions","title":"Recurring Transactions API","description":"Refer\xeancia completa da API de Transa\xe7\xf5es Recorrentes","source":"@site/docs/api-reference/recurring-transactions.md","sourceDirName":"api-reference","slug":"/api-reference/recurring-transactions","permalink":"/fintrack-docs/en/docs/api-reference/recurring-transactions","draft":false,"unlisted":false,"editUrl":"https://github.com/PHRaulino-Space/fintrack-docs/tree/main/gh-docs/docs/api-reference/recurring-transactions.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Recurring Transactions API","description":"Refer\xeancia completa da API de Transa\xe7\xf5es Recorrentes"},"sidebar":"tutorialSidebar","previous":{"title":"Import Sessions API","permalink":"/fintrack-docs/en/docs/api-reference/import-sessions"},"next":{"title":"Reports","permalink":"/fintrack-docs/en/docs/api-reference/reports"}}');var i=r(4848),d=r(8453);const a={sidebar_position:8,title:"Recurring Transactions API",description:"Refer\xeancia completa da API de Transa\xe7\xf5es Recorrentes"},c="Recurring Transactions API",o={},t=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Conceito Principal",id:"conceito-principal",level:3},{value:"Modelos de Dados",id:"modelos-de-dados",level:2},{value:"Tabelas de Recorr\xeancia",id:"tabelas-de-recorr\xeancia",level:3},{value:"Tabelas de Tags",id:"tabelas-de-tags",level:3},{value:"Enum: TransactionFrequency",id:"enum-transactionfrequency",level:3},{value:"Entidades",id:"entidades",level:2},{value:"RecurringIncome",id:"recurringincome",level:3},{value:"RecurringExpense",id:"recurringexpense",level:3},{value:"RecurringTransfer",id:"recurringtransfer",level:3},{value:"RecurringCardTransaction",id:"recurringcardtransaction",level:3},{value:"L\xf3gica de Reconcilia\xe7\xe3o (FIFO)",id:"l\xf3gica-de-reconcilia\xe7\xe3o-fifo",level:2},{value:"Processo de Reconcilia\xe7\xe3o",id:"processo-de-reconcilia\xe7\xe3o",level:3},{value:"Passo 1: Proje\xe7\xe3o de Slots",id:"passo-1-proje\xe7\xe3o-de-slots",level:4},{value:"Passo 2: Contagem de Registros Resolvidos",id:"passo-2-contagem-de-registros-resolvidos",level:4},{value:"Passo 3: Identifica\xe7\xe3o de Gaps (Slots Vazios)",id:"passo-3-identifica\xe7\xe3o-de-gaps-slots-vazios",level:4},{value:"Exemplo Pr\xe1tico",id:"exemplo-pr\xe1tico",level:3},{value:"Status de Transa\xe7\xf5es",id:"status-de-transa\xe7\xf5es",level:2},{value:"Regra do Status IGNORE",id:"regra-do-status-ignore",level:3},{value:"Endpoints",id:"endpoints",level:2},{value:"Listar Pend\xeancias por Contexto",id:"listar-pend\xeancias-por-contexto",level:3},{value:"Obter Proje\xe7\xe3o de Recorr\xeancia",id:"obter-proje\xe7\xe3o-de-recorr\xeancia",level:3},{value:"Listar Transa\xe7\xf5es Recorrentes",id:"listar-transa\xe7\xf5es-recorrentes",level:3},{value:"Criar Recorr\xeancia",id:"criar-recorr\xeancia",level:3},{value:"Obter Recorr\xeancia",id:"obter-recorr\xeancia",level:3},{value:"Atualizar Recorr\xeancia",id:"atualizar-recorr\xeancia",level:3},{value:"Desativar Recorr\xeancia",id:"desativar-recorr\xeancia",level:3},{value:"Excluir Recorr\xeancia",id:"excluir-recorr\xeancia",level:3},{value:"Regras de Neg\xf3cio",id:"regras-de-neg\xf3cio",level:2},{value:"Limite de Proje\xe7\xe3o",id:"limite-de-proje\xe7\xe3o",level:3},{value:"Flexibilidade de Datas",id:"flexibilidade-de-datas",level:3},{value:"Tratamento de Exce\xe7\xf5es",id:"tratamento-de-exce\xe7\xf5es",level:3},{value:"Casos de Uso",id:"casos-de-uso",level:2},{value:"Cen\xe1rio 1: Pagamento Antecipado",id:"cen\xe1rio-1-pagamento-antecipado",level:3},{value:"Cen\xe1rio 2: Uso do Status IGNORE",id:"cen\xe1rio-2-uso-do-status-ignore",level:3},{value:"Cen\xe1rio 3: Recorr\xeancia com T\xe9rmino",id:"cen\xe1rio-3-recorr\xeancia-com-t\xe9rmino",level:3},{value:"Seguran\xe7a",id:"seguran\xe7a",level:2},{value:"Isolamento de Dados",id:"isolamento-de-dados",level:3},{value:"Otimiza\xe7\xe3o de Queries",id:"otimiza\xe7\xe3o-de-queries",level:3},{value:"C\xf3digos de Erro",id:"c\xf3digos-de-erro",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"recurring-transactions-api",children:"Recurring Transactions API"})}),"\n",(0,i.jsx)(n.p,{children:"API para gerenciamento e reconcilia\xe7\xe3o de transa\xe7\xf5es recorrentes no sistema de finan\xe7as pessoais."}),"\n",(0,i.jsx)(n.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,i.jsxs)(n.p,{children:["O ",(0,i.jsx)(n.strong,{children:"Recurring Transactions Service"})," \xe9 um servi\xe7o modular que gerencia transa\xe7\xf5es recorrentes atrav\xe9s de uma l\xf3gica de ",(0,i.jsx)(n.strong,{children:"reconcilia\xe7\xe3o por contagem (FIFO - First-In, First-Out)"}),". Sua principal responsabilidade \xe9 calcular e auditar compromissos financeiros, identificando pend\xeancias que podem ser consumidas por outras partes do sistema (como Import Session)."]}),"\n",(0,i.jsx)(n.h3,{id:"conceito-principal",children:"Conceito Principal"}),"\n",(0,i.jsxs)(n.p,{children:["A l\xf3gica de pend\xeancias ",(0,i.jsx)(n.strong,{children:"n\xe3o \xe9 baseada em match de data exata"}),", mas sim em um balan\xe7o entre:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Quantidade de ocorr\xeancias projetadas"})," (slots esperados)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Quantidade de registros efetivados"})," (pagamentos realizados)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"modelos-de-dados",children:"Modelos de Dados"}),"\n",(0,i.jsx)(n.h3,{id:"tabelas-de-recorr\xeancia",children:"Tabelas de Recorr\xeancia"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Tabela"}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,i.jsx)(n.th,{children:"Contexto"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"recurring_incomes"})}),(0,i.jsx)(n.td,{children:"Receitas recorrentes atreladas a uma conta"}),(0,i.jsx)(n.td,{children:"Conta"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"recurring_expenses"})}),(0,i.jsx)(n.td,{children:"Despesas recorrentes atreladas a uma conta"}),(0,i.jsx)(n.td,{children:"Conta"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"recurring_transfers"})}),(0,i.jsx)(n.td,{children:"Transfer\xeancias autom\xe1ticas entre duas contas"}),(0,i.jsx)(n.td,{children:"Conta"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"recurring_card_transactions"})}),(0,i.jsx)(n.td,{children:"Transa\xe7\xf5es recorrentes em fatura de cart\xe3o"}),(0,i.jsx)(n.td,{children:"Cart\xe3o"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"tabelas-de-tags",children:"Tabelas de Tags"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_incomes_tags"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_expenses_tags"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_card_transactions_tags"})}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["A tabela ",(0,i.jsx)(n.code,{children:"recurring_transfers"})," n\xe3o possui tabela de tags associada."]})}),"\n",(0,i.jsx)(n.h3,{id:"enum-transactionfrequency",children:"Enum: TransactionFrequency"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DAILY | WEEKLY | BIWEEKLY | MONTHLY | BIMONTHLY | QUARTERLY | YEARLY\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Frequ\xeancia"}),(0,i.jsx)(n.th,{children:"Intervalo"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DAILY"})}),(0,i.jsx)(n.td,{children:"1 dia"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"WEEKLY"})}),(0,i.jsx)(n.td,{children:"7 dias"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BIWEEKLY"})}),(0,i.jsx)(n.td,{children:"14 dias"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MONTHLY"})}),(0,i.jsx)(n.td,{children:"1 m\xeas (mesmo dia)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BIMONTHLY"})}),(0,i.jsx)(n.td,{children:"2 meses"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"QUARTERLY"})}),(0,i.jsx)(n.td,{children:"3 meses"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"YEARLY"})}),(0,i.jsx)(n.td,{children:"1 ano"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"entidades",children:"Entidades"}),"\n",(0,i.jsx)(n.h3,{id:"recurringincome",children:"RecurringIncome"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid",\n  "description": "Sal\xe1rio",\n  "amount": 5000.00,\n  "account_id": "uuid",\n  "category_id": "uuid",\n  "subcategory_id": "uuid",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-05",\n  "end_date": null,\n  "is_active": true,\n  "created_at": "2024-01-01T00:00:00Z",\n  "updated_at": "2024-01-01T00:00:00Z"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"recurringexpense",children:"RecurringExpense"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid",\n  "description": "Aluguel",\n  "amount": 1500.00,\n  "account_id": "uuid",\n  "category_id": "uuid",\n  "subcategory_id": "uuid",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-10",\n  "end_date": null,\n  "is_active": true,\n  "created_at": "2024-01-01T00:00:00Z",\n  "updated_at": "2024-01-01T00:00:00Z"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"recurringtransfer",children:"RecurringTransfer"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid",\n  "description": "Reserva Mensal",\n  "amount": 500.00,\n  "source_account_id": "uuid",\n  "destination_account_id": "uuid",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-01",\n  "end_date": null,\n  "is_active": true,\n  "created_at": "2024-01-01T00:00:00Z",\n  "updated_at": "2024-01-01T00:00:00Z"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"recurringcardtransaction",children:"RecurringCardTransaction"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid",\n  "description": "Netflix",\n  "amount": 49.90,\n  "card_id": "uuid",\n  "category_id": "uuid",\n  "subcategory_id": "uuid",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-15",\n  "end_date": null,\n  "is_active": true,\n  "created_at": "2024-01-01T00:00:00Z",\n  "updated_at": "2024-01-01T00:00:00Z"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"l\xf3gica-de-reconcilia\xe7\xe3o-fifo",children:"L\xf3gica de Reconcilia\xe7\xe3o (FIFO)"}),"\n",(0,i.jsx)(n.h3,{id:"processo-de-reconcilia\xe7\xe3o",children:"Processo de Reconcilia\xe7\xe3o"}),"\n",(0,i.jsx)(n.h4,{id:"passo-1-proje\xe7\xe3o-de-slots",children:"Passo 1: Proje\xe7\xe3o de Slots"}),"\n",(0,i.jsx)(n.p,{children:"Gera uma lista ordenada de datas de vencimento esperadas:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"In\xedcio"}),": ",(0,i.jsx)(n.code,{children:"start_date"})," da recorr\xeancia"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fim"}),": \xdaltimo dia do m\xeas atual"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Interrup\xe7\xe3o"}),": Se houver ",(0,i.jsx)(n.code,{children:"end_date"})," anterior ao fim do m\xeas atual"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resultado"}),": Lista ordenada de datas"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Exemplo:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Timeline: [Jan, Fev, Mar, Abr, Mai, Jun] (6 slots)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"passo-2-contagem-de-registros-resolvidos",children:"Passo 2: Contagem de Registros Resolvidos"}),"\n",(0,i.jsx)(n.p,{children:"Conta quantos registros existem nas tabelas finais vinculados ao ID da recorr\xeancia:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filtro de Status"}),": Considera apenas ",(0,i.jsx)(n.code,{children:"PAID"})," ou ",(0,i.jsx)(n.code,{children:"IGNORE"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flexibilidade de Data"}),": A ",(0,i.jsx)(n.code,{children:"transaction_date"})," do registro final n\xe3o precisa coincidir com o m\xeas do slot"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Regra FIFO"}),': Pagamentos "consomem" vagas na fila por ordem de chegada']}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"passo-3-identifica\xe7\xe3o-de-gaps-slots-vazios",children:"Passo 3: Identifica\xe7\xe3o de Gaps (Slots Vazios)"}),"\n",(0,i.jsx)(n.p,{children:"Algoritmo de cruzamento:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Pegue o n\xfamero total de registros resolvidos (R registros)"}),"\n",(0,i.jsx)(n.li,{children:'Os primeiros R slots da Timeline s\xe3o considerados "liquidados"'}),"\n",(0,i.jsxs)(n.li,{children:["Todos os slots subsequentes (do slot R+1 em diante) s\xe3o considerados ",(0,i.jsx)(n.strong,{children:"PENDENTES"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exemplo-pr\xe1tico",children:"Exemplo Pr\xe1tico"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cen\xe1rio"}),": Recorr\xeancia mensal iniciada em Janeiro, consultada em Junho"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Timeline Projetada"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Jan, Fev, Mar, Abr, Mai, Jun (6 slots)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Registros no Banco"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"M\xeas"}),(0,i.jsx)(n.th,{children:"Status"}),(0,i.jsx)(n.th,{children:"Observa\xe7\xe3o"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Janeiro"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PAID"})}),(0,i.jsx)(n.td,{children:"Pago em janeiro"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Fevereiro"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"IGNORE"})}),(0,i.jsx)(n.td,{children:"Usu\xe1rio optou por n\xe3o pagar"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Mar\xe7o"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PAID"})}),(0,i.jsx)(n.td,{children:"Pago em mar\xe7o"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Abril"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PAID"})}),(0,i.jsx)(n.td,{children:"Pago em mar\xe7o (antecipado)"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Total Resolvido"}),": 4 registros"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Consumo de Slots"}),": Jan, Fev, Mar e Abr s\xe3o preenchidos"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Resultado Pendente"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Maio \u2192 ",(0,i.jsx)(n.strong,{children:"PENDING"})]}),"\n",(0,i.jsxs)(n.li,{children:["Junho \u2192 ",(0,i.jsx)(n.strong,{children:"PENDING"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"status-de-transa\xe7\xf5es",children:"Status de Transa\xe7\xf5es"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Status"}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,i.jsx)(n.th,{children:"Comportamento"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PAID"})}),(0,i.jsx)(n.td,{children:"Transa\xe7\xe3o efetivada/paga"}),(0,i.jsx)(n.td,{children:"Consome um slot da fila"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"IGNORE"})}),(0,i.jsx)(n.td,{children:"Exce\xe7\xe3o/Pulado pelo usu\xe1rio"}),(0,i.jsx)(n.td,{children:"Consome um slot mas sem valor financeiro"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PENDING"})}),(0,i.jsx)(n.td,{children:"Slot vazio"}),(0,i.jsx)(n.td,{children:"N\xe3o possui registro correspondente"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VALIDATING"})}),(0,i.jsx)(n.td,{children:"Em processo de valida\xe7\xe3o"}),(0,i.jsx)(n.td,{children:"N\xe3o consome slot"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"regra-do-status-ignore",children:"Regra do Status IGNORE"}),"\n",(0,i.jsxs)(n.p,{children:["Registros com status ",(0,i.jsx)(n.code,{children:"IGNORE"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Encerram a pend\xeancia de um slot tanto quanto um ",(0,i.jsx)(n.code,{children:"PAID"})]}),"\n",(0,i.jsx)(n.li,{children:"N\xe3o representam valor financeiro no saldo"}),"\n",(0,i.jsx)(n.li,{children:"Servem para quando o usu\xe1rio decide que naquele per\xedodo espec\xedfico a recorr\xeancia n\xe3o deve ser cobrada"}),"\n",(0,i.jsx)(n.li,{children:"N\xe3o aparecem na lista de pend\xeancias atuais"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"listar-pend\xeancias-por-contexto",children:"Listar Pend\xeancias por Contexto"}),"\n",(0,i.jsx)(n.p,{children:"Lista todas as transa\xe7\xf5es recorrentes pendentes para um contexto espec\xedfico."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /recurring/pending\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe2metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"ID da conta (para contexto de conta)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"card_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"ID do cart\xe3o (para contexto de cart\xe3o)"})]})]})]}),"\n",(0,i.jsxs)(n.admonition,{title:"Regra de Contexto",type:"info",children:[(0,i.jsxs)(n.p,{children:["Deve informar ",(0,i.jsx)(n.code,{children:"account_id"})," ",(0,i.jsx)(n.strong,{children:"OU"})," ",(0,i.jsx)(n.code,{children:"card_id"})," (n\xe3o ambos)."]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Para Contas"})," (",(0,i.jsx)(n.code,{children:"account_id"}),"):"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_incomes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_expenses"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_transfers"})}),"\n"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Para Cart\xf5es"})," (",(0,i.jsx)(n.code,{children:"card_id"}),"):"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"recurring_card_transactions"})}),"\n"]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "recurring_id": "uuid",\n    "type": "expense",\n    "description": "Aluguel Apartamento",\n    "amount": 1500.00,\n    "reference_date": "2025-05-10",\n    "reference_period": "Maio/2025",\n    "category": {\n      "id": "uuid",\n      "name": "Moradia"\n    },\n    "subcategory": {\n      "id": "uuid",\n      "name": "Aluguel"\n    },\n    "tags": ["Essencial", "Fixo"]\n  }\n]\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Comportamento:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Identifica todas as recorr\xeancias ativas para o contexto"}),"\n",(0,i.jsx)(n.li,{children:"Calcula os slots vazios (gaps) at\xe9 o fim do m\xeas atual"}),"\n",(0,i.jsx)(n.li,{children:"Retorna apenas as pend\xeancias"}),"\n",(0,i.jsxs)(n.li,{children:["Filtra por ",(0,i.jsx)(n.code,{children:"workspace_id"})," para isolamento"]}),"\n",(0,i.jsx)(n.li,{children:"Retorna metadados completos (categoria, subcategoria, tags)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"obter-proje\xe7\xe3o-de-recorr\xeancia",children:"Obter Proje\xe7\xe3o de Recorr\xeancia"}),"\n",(0,i.jsx)(n.p,{children:"Retorna a timeline completa de uma recorr\xeancia espec\xedfica com o status de cada slot."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /recurring/:id/projection\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "recurring_id": "uuid",\n  "type": "expense",\n  "description": "Internet Fibra",\n  "frequency": "MONTHLY",\n  "start_date": "2025-01-05",\n  "end_date": null,\n  "projection": [\n    {\n      "slot_number": 1,\n      "expected_date": "2025-01-05",\n      "status": "PAID",\n      "paid_date": "2025-01-05",\n      "transaction_id": "uuid"\n    },\n    {\n      "slot_number": 2,\n      "expected_date": "2025-02-05",\n      "status": "IGNORE",\n      "paid_date": null,\n      "transaction_id": "uuid"\n    },\n    {\n      "slot_number": 3,\n      "expected_date": "2025-03-05",\n      "status": "PAID",\n      "paid_date": "2025-03-03",\n      "transaction_id": "uuid"\n    },\n    {\n      "slot_number": 4,\n      "expected_date": "2025-04-05",\n      "status": "PAID",\n      "paid_date": "2025-03-03",\n      "transaction_id": "uuid"\n    },\n    {\n      "slot_number": 5,\n      "expected_date": "2025-05-05",\n      "status": "PENDING",\n      "paid_date": null,\n      "transaction_id": null\n    },\n    {\n      "slot_number": 6,\n      "expected_date": "2025-06-05",\n      "status": "PENDING",\n      "paid_date": null,\n      "transaction_id": null\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Caracter\xedsticas:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mostra hist\xf3rico completo da recorr\xeancia"}),"\n",(0,i.jsx)(n.li,{children:"Permite auditoria visual do cumprimento dos compromissos"}),"\n",(0,i.jsxs)(n.li,{children:["Identifica pagamentos antecipados (quando ",(0,i.jsx)(n.code,{children:"paid_date"})," \u2260 ",(0,i.jsx)(n.code,{children:"expected_date"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"listar-transa\xe7\xf5es-recorrentes",children:"Listar Transa\xe7\xf5es Recorrentes"}),"\n",(0,i.jsx)(n.p,{children:"Lista todos os modelos de recorr\xeancia cadastrados sem c\xe1lculos de proje\xe7\xe3o."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /recurring\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe2metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Obrigat\xf3rio"}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"N\xe3o"}),(0,i.jsx)(n.td,{children:"Filtrar por conta"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"card_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"N\xe3o"}),(0,i.jsx)(n.td,{children:"Filtrar por cart\xe3o"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"is_active"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"N\xe3o"}),(0,i.jsx)(n.td,{children:"Filtrar por status ativo"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"N\xe3o"}),(0,i.jsxs)(n.td,{children:["Filtrar por tipo (",(0,i.jsx)(n.code,{children:"income"}),", ",(0,i.jsx)(n.code,{children:"expense"}),", ",(0,i.jsx)(n.code,{children:"transfer"}),", ",(0,i.jsx)(n.code,{children:"card_transaction"}),")"]})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": "uuid",\n    "type": "expense",\n    "description": "Netflix",\n    "amount": 49.90,\n    "account_id": "uuid",\n    "category_id": "uuid",\n    "subcategory_id": "uuid",\n    "frequency": "MONTHLY",\n    "start_date": "2024-01-15",\n    "end_date": null,\n    "is_active": true,\n    "tags": ["Entretenimento", "Assinatura"]\n  }\n]\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Caracter\xedsticas:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Dados puros das tabelas"}),"\n",(0,i.jsx)(n.li,{children:"\xdatil para interfaces de CRUD"}),"\n",(0,i.jsx)(n.li,{children:"Sem l\xf3gica de neg\xf3cio aplicada"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"criar-recorr\xeancia",children:"Criar Recorr\xeancia"}),"\n",(0,i.jsx)(n.p,{children:"Cria uma nova transa\xe7\xe3o recorrente."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /recurring\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body (Exemplo - Expense):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "expense",\n  "description": "Academia Smart Fit",\n  "amount": 89.90,\n  "account_id": "uuid-conta",\n  "category_id": "uuid-categoria",\n  "subcategory_id": "uuid-subcategoria",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-05",\n  "end_date": null,\n  "is_active": true,\n  "tag_ids": ["uuid-tag-1", "uuid-tag-2"]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body (Exemplo - Transfer):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "transfer",\n  "description": "Reserva Emerg\xeancia",\n  "amount": 500.00,\n  "source_account_id": "uuid-conta-origem",\n  "destination_account_id": "uuid-conta-destino",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-01",\n  "is_active": true\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body (Exemplo - Card Transaction):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "card_transaction",\n  "description": "Spotify Premium",\n  "amount": 21.90,\n  "card_id": "uuid-cartao",\n  "category_id": "uuid-categoria",\n  "subcategory_id": "uuid-subcategoria",\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-10",\n  "is_active": true,\n  "tag_ids": ["uuid-tag-1"]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response (201 Created):"})," Objeto da recorr\xeancia criada"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"obter-recorr\xeancia",children:"Obter Recorr\xeancia"}),"\n",(0,i.jsx)(n.p,{children:"Retorna os detalhes de uma recorr\xeancia espec\xedfica."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /recurring/:id\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid",\n  "type": "expense",\n  "description": "Aluguel",\n  "amount": 1500.00,\n  "account_id": "uuid",\n  "category": {\n    "id": "uuid",\n    "name": "Moradia"\n  },\n  "subcategory": {\n    "id": "uuid",\n    "name": "Aluguel"\n  },\n  "frequency": "MONTHLY",\n  "start_date": "2024-01-10",\n  "end_date": null,\n  "is_active": true,\n  "tags": [\n    { "id": "uuid", "name": "Essencial" },\n    { "id": "uuid", "name": "Fixo" }\n  ],\n  "created_at": "2024-01-01T00:00:00Z",\n  "updated_at": "2024-01-01T00:00:00Z"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"atualizar-recorr\xeancia",children:"Atualizar Recorr\xeancia"}),"\n",(0,i.jsx)(n.p,{children:"Atualiza uma recorr\xeancia existente."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"PUT /recurring/:id\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "description": "Aluguel Apartamento Centro",\n  "amount": 1600.00,\n  "category_id": "uuid-nova-categoria",\n  "is_active": true\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response (200 OK):"})," Objeto da recorr\xeancia atualizada"]}),"\n",(0,i.jsx)(n.admonition,{title:"Aten\xe7\xe3o",type:"warning",children:(0,i.jsx)(n.p,{children:"Altera\xe7\xf5es em recorr\xeancias afetam apenas slots futuros. Registros j\xe1 efetivados nas tabelas principais n\xe3o s\xe3o modificados."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"desativar-recorr\xeancia",children:"Desativar Recorr\xeancia"}),"\n",(0,i.jsx)(n.p,{children:"Desativa uma recorr\xeancia sem exclu\xed-la."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"PATCH /recurring/:id/deactivate\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Recurring transaction deactivated successfully"\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Recomenda\xe7\xe3o",type:"tip",children:(0,i.jsx)(n.p,{children:"Prefira desativar ao inv\xe9s de excluir para manter hist\xf3rico de auditoria."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"excluir-recorr\xeancia",children:"Excluir Recorr\xeancia"}),"\n",(0,i.jsx)(n.p,{children:"Remove permanentemente uma recorr\xeancia."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"DELETE /recurring/:id\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response:"})," ",(0,i.jsx)(n.code,{children:"204 No Content"})]}),"\n",(0,i.jsx)(n.admonition,{title:"Aten\xe7\xe3o",type:"danger",children:(0,i.jsx)(n.p,{children:"Esta a\xe7\xe3o \xe9 irrevers\xedvel. Registros j\xe1 efetivados nas tabelas principais n\xe3o s\xe3o afetados, mas perdem a refer\xeancia \xe0 recorr\xeancia."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"regras-de-neg\xf3cio",children:"Regras de Neg\xf3cio"}),"\n",(0,i.jsx)(n.h3,{id:"limite-de-proje\xe7\xe3o",children:"Limite de Proje\xe7\xe3o"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A proje\xe7\xe3o gera datas at\xe9 ",(0,i.jsx)(n.strong,{children:"o \xfaltimo dia do m\xeas atual"})]}),"\n",(0,i.jsxs)(n.li,{children:["Se ",(0,i.jsx)(n.code,{children:"end_date"})," estiver preenchida e for anterior ao final do m\xeas atual, a proje\xe7\xe3o cessa naquela data"]}),"\n",(0,i.jsx)(n.li,{children:"N\xe3o projeta datas futuras al\xe9m do m\xeas corrente"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"flexibilidade-de-datas",children:"Flexibilidade de Datas"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Caracter\xedstica fundamental"}),": O pagamento n\xe3o precisa ocorrer na data exata do slot."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Exemplo"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Slot esperado: 05/04/2025"}),"\n",(0,i.jsx)(n.li,{children:"Pagamento realizado: 28/03/2025 (antecipado)"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resultado"}),": O slot de Abril \xe9 consumido mesmo assim"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Isso resolve:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pagamentos antecipados"}),"\n",(0,i.jsx)(n.li,{children:"Pagamentos atrasados"}),"\n",(0,i.jsx)(n.li,{children:"M\xfaltiplos pagamentos no mesmo dia"}),"\n",(0,i.jsx)(n.li,{children:"Pagamentos em lote"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tratamento-de-exce\xe7\xf5es",children:"Tratamento de Exce\xe7\xf5es"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Registros com status ",(0,i.jsx)(n.code,{children:"IGNORE"}),' devem "consumir" um slot exatamente como um ',(0,i.jsx)(n.code,{children:"PAID"})]}),"\n",(0,i.jsx)(n.li,{children:"Serve para quando o usu\xe1rio decide que naquele per\xedodo espec\xedfico a recorr\xeancia n\xe3o deve ser cobrada"}),"\n",(0,i.jsx)(n.li,{children:"N\xe3o aparecem como pendentes"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"casos-de-uso",children:"Casos de Uso"}),"\n",(0,i.jsx)(n.h3,{id:"cen\xe1rio-1-pagamento-antecipado",children:"Cen\xe1rio 1: Pagamento Antecipado"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situa\xe7\xe3o"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Recorr\xeancia: Internet mensal, dia 10 de cada m\xeas"}),"\n",(0,i.jsx)(n.li,{children:"Usu\xe1rio pagou as contas de Mar\xe7o, Abril e Maio no dia 28/02"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Comportamento do Sistema"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Timeline: [10/03, 10/04, 10/05, 10/06]\nPagamentos no banco: 3 registros em 28/02 (todos PAID)\n\nResultado:\n- Slot 10/03 \u2192 PAID (consumido pelo 1\xba pagamento de 28/02)\n- Slot 10/04 \u2192 PAID (consumido pelo 2\xba pagamento de 28/02)\n- Slot 10/05 \u2192 PAID (consumido pelo 3\xba pagamento de 28/02)\n- Slot 10/06 \u2192 PENDING\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cen\xe1rio-2-uso-do-status-ignore",children:"Cen\xe1rio 2: Uso do Status IGNORE"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situa\xe7\xe3o"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Recorr\xeancia: Academia mensal, dia 5"}),"\n",(0,i.jsx)(n.li,{children:"Em Mar\xe7o o usu\xe1rio estava viajando e n\xe3o usou a academia"}),"\n",(0,i.jsx)(n.li,{children:"Conseguiu cancelar a cobran\xe7a daquele m\xeas"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Comportamento do Sistema"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Timeline: [05/01, 05/02, 05/03, 05/04, 05/05, 05/06]\n\nRegistros:\n- Janeiro: PAID\n- Fevereiro: PAID\n- Mar\xe7o: IGNORE (criado manualmente pelo usu\xe1rio)\n- Abril: PAID\n- Maio e Junho: Sem registro\n\nResultado ao consultar pend\xeancias em Junho:\n- Maio \u2192 PENDING\n- Junho \u2192 PENDING\n\n(Mar\xe7o n\xe3o aparece como pendente pois foi marcado como IGNORE)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cen\xe1rio-3-recorr\xeancia-com-t\xe9rmino",children:"Cen\xe1rio 3: Recorr\xeancia com T\xe9rmino"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situa\xe7\xe3o"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Recorr\xeancia: Financiamento em 12x, come\xe7ou em 01/01/2025"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"end_date"}),": 01/12/2025"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Comportamento do Sistema"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Consultando em Junho de 2025:\nTimeline gerada: [01/01, 01/02, 01/03, 01/04, 01/05, 01/06]\n\nPagamentos: 4 registros PAID\n\nResultado:\n- Slots 1 a 4 \u2192 PAID\n- Slots 5 e 6 \u2192 PENDING\n\nConsultando em Janeiro de 2026:\nTimeline gerada: [01/01, 01/02, ..., 01/12]\n(N\xe3o projeta al\xe9m de 01/12 por causa do end_date)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"seguran\xe7a",children:"Seguran\xe7a"}),"\n",(0,i.jsx)(n.h3,{id:"isolamento-de-dados",children:"Isolamento de Dados"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Regra obrigat\xf3ria"}),": Toda consulta SQL deve incluir filtro por ",(0,i.jsx)(n.code,{children:"workspace_id"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"WHERE workspace_id = $1\n"})}),"\n",(0,i.jsx)(n.p,{children:"Isso garante que:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Um usu\xe1rio nunca acesse dados de outro workspace"}),"\n",(0,i.jsx)(n.li,{children:"Suporte multi-tenant robusto"}),"\n",(0,i.jsx)(n.li,{children:"Conformidade com privacidade de dados"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"otimiza\xe7\xe3o-de-queries",children:"Otimiza\xe7\xe3o de Queries"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problema"}),": Evitar N+1 queries ao verificar status de m\xfaltiplas recorr\xeancias"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),": Bulk processing"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Buscar todas as recorr\xeancias ativas\nSELECT * FROM recurring_expenses\nWHERE account_id = $1 AND workspace_id = $2 AND is_active = true;\n\n-- Buscar todos os registros resolvidos de uma vez\nSELECT recurring_expense_id, COUNT(*) as resolved_count\nFROM expenses\nWHERE recurring_expense_id = ANY($1)\n  AND transaction_status IN ('PAID', 'IGNORE')\nGROUP BY recurring_expense_id;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"c\xf3digos-de-erro",children:"C\xf3digos de Erro"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"C\xf3digo"}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"400"})}),(0,i.jsx)(n.td,{children:"Request inv\xe1lido (falta account_id ou card_id, par\xe2metros inv\xe1lidos)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"401"})}),(0,i.jsx)(n.td,{children:"N\xe3o autorizado"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"403"})}),(0,i.jsx)(n.td,{children:"Permiss\xe3o insuficiente para o workspace"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"404"})}),(0,i.jsx)(n.td,{children:"Recorr\xeancia n\xe3o encontrada"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"422"})}),(0,i.jsx)(n.td,{children:"Dados inv\xe1lidos (ex: end_date antes de start_date)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"500"})}),(0,i.jsx)(n.td,{children:"Erro interno do servidor"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>c});var s=r(6540);const i={},d=s.createContext(i);function a(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);